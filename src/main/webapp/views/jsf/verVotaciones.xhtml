<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<head>
	<title>#{msgs.verVotaciones}</title>
</head>
<body>
	<h2>#{msgs.verVotaciones}</h2>

	<f:event listener="#{verVotacionesBean.update}" type="preRenderComponent"/>
	<h:form>
		<ui:fragment rendered="#{empty verVotaciones.tema.id}">
			<h5>#{msgs.verVotos}</h5>
			<h:selectOneRadio>
				<f:selectItems value="#{verVotacionesBean.temas}" var="tema" itemValue="#{tema.id}" itemLabel="#{tema.nombre}" />
			</h:selectOneRadio>
			<br/>
			<h:commandButton value="#{msgs.seleccionar}" type="submit" action="#{verVotacionesBean.seleccionarTema()}" />
		</ui:fragment>
			
		<ui:fragment rendered="#{not empty verVotaciones.tema.id}">
			<h5>#{msgs.seleccionarNivelEstudios} ${verVotacionesBean.tema.nombre}</h5>
			<input type="hidden" name="id" value="#{verVotacionesBean.tema.id}"/>
			<label for="votos">#{msgs.numeroVotos}</label>
			<span id="votos">#{verVotacionesBean.numeroVotos}</span><br/>
			<ui:fragment rendered="#{verVotacionesBean.tema.id} == null">
				<label for="nivel_estudios">Elija el nivel de estudios: </label>
				<select id="nivel_estudios" name="nivel_estudios">
					<c:forEach items="${bean.nivelEstudios}" var="nivelEstudios">
						<option value="${nivelEstudios}">${nivelEstudios}</option>
					</c:forEach>
				</select>
				<br/>
				<h:commandButton value="#{msgs.seleccionar}" type="submit" action="#{verVotacionesBean.process}" />
			</ui:fragment>
			<ui:fragment rendered="#{verVotacionesBean.tema.id} != null">
					<label for="media">Para el nivel de estudios ${verVotacionesBean.nivelEstudios} hay una media de: </label>
					<span id="media">${verVotacionesBean.mediaVotos}</span>
			</ui:fragment>
		</ui:fragment>
	</h:form>
	<br/><br/>
	<h:link value="#{msgs.volverIndice}" outcome="homePage" />
</body>
</html>