<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
<script type="text/javascript">
	function change() {
		var value = document.getElementById("valoracion").value
		document.getElementById("valoracion_texto").innerHTML = "Puntuación: "
				+ value;
	}
	function load() {
		if (document.getElementById("valoracion")) {
			document.getElementById("valoracion").addEventListener('change',
					change);
		}
	}
</script>
<title>Votar</title>
</h:head>
<h:body onload="load()">
	<h2>Votar</h2>
	
	<f:event listener="#{votarBean.update}" type="preRenderComponent"/>
	
	<h:form>
		<ui:fragment rendered="#{votarBean.tema.id==null}">
			<h5>Elige un tema para votar:</h5>
				<h:selectOneRadio>
					<f:selectItems var="tema" itemLabel="#{tema.nombre}" itemValue="#{tema.id}" value="#{votarBean.temas}"></f:selectItems>
				</h:selectOneRadio>
				<br />
				<h:commandButton value="#{msgs.votar}" type="submit" action="#{votarBean.process}" />
		</ui:fragment>
		<ui:fragment rendered="#{votarBean.tema.id!=null}">
			<h5>Vote para el siguiente tema: #{votarBean.tema.nombre}</h5>
				<h:inputHidden value="#{votarBean.tema.id}" />
				<p>Pregunta: #{votarBean.tema.pregunta}</p>
				<br />
				<label for="valoracion">Elija la valoracion: </label>
				<input type="range" id="valoracion" name="valoracion" value="0" min="0" max="10" />
				<span id="valoracion_texto">Puntuación: 0</span>
				<br />
				<label for="nivel_estudios">Elija el nivel de estudios: </label>
				<select id="nivel_estudios" name="nivel_estudios">
					<option value="LICENCIADO">Licenciado</option>
					<option value="DIPLOMADO">Diplomado</option>
					<option value="BACHILLERATO">Bachillerato</option>
				</select>
				<br />
				<h:commandButton value="#{msgs.votar}" type="submit" action="#{votarBean.process}" />
		</ui:fragment>
	</h:form>
	
	<br />
	<br />
	
	<h:link value="#{msgs.volverIndice}" outcome="homePage" />
</h:body>
</html>